<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Technical Details · Notebook Server</title><meta name="title" content="Technical Details · Notebook Server"/><meta property="og:title" content="Technical Details · Notebook Server"/><meta property="twitter:title" content="Technical Details · Notebook Server"/><meta name="description" content="Documentation for Notebook Server."/><meta property="og:description" content="Documentation for Notebook Server."/><meta property="twitter:description" content="Documentation for Notebook Server."/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../"><img src="../assets/logo.png" alt="Notebook Server logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../">Notebook Server</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><a class="tocitem" href="../coldstage/">Cold Stage Control</a></li><li><a class="tocitem" href="../vtdma/">Virtual Tandem DMA</a></li><li><a class="tocitem" href="../testbed/">Hygroscopicity Testbed</a></li><li><a class="tocitem" href="../invert/">HTDMA Inversion</a></li><li><a class="tocitem" href="../physics/">Atmospheric Physics Notebooks</a></li><li><a class="tocitem" href="../tutorial/">Data Inversion Tutorial</a></li><li class="is-active"><a class="tocitem" href>Technical Details</a><ul class="internal"><li><a class="tocitem" href="#Server-Hardware"><span>Server Hardware</span></a></li><li><a class="tocitem" href="#Server-Software"><span>Server Software</span></a></li><li><a class="tocitem" href="#Server-Design"><span>Server Design</span></a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Technical Details</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Technical Details</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/CIF-Cold-Stage/notebooks.github.io" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/CIF-Cold-Stage/notebooks.github.io/blob/main/src/about.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Technical-Details"><a class="docs-heading-anchor" href="#Technical-Details">Technical Details</a><a id="Technical-Details-1"></a><a class="docs-heading-anchor-permalink" href="#Technical-Details" title="Permalink"></a></h1><h2 id="Server-Hardware"><a class="docs-heading-anchor" href="#Server-Hardware">Server Hardware</a><a id="Server-Hardware-1"></a><a class="docs-heading-anchor-permalink" href="#Server-Hardware" title="Permalink"></a></h2><p>This server runs on a dual AMD EPYC 7542 32C/64T processor with 256GB or RAM and serves via 10GbE base-t ethernet connection. </p><h2 id="Server-Software"><a class="docs-heading-anchor" href="#Server-Software">Server Software</a><a id="Server-Software-1"></a><a class="docs-heading-anchor-permalink" href="#Server-Software" title="Permalink"></a></h2><p>This server runs a custom web server written using the <a href="https://genieframework.com/">Genie framework</a>. The web server software is made available via <a href="https://github.com/CIF-Cold-Stage/swarmServerInfrastructure">GitHub</a>.</p><h2 id="Server-Design"><a class="docs-heading-anchor" href="#Server-Design">Server Design</a><a id="Server-Design-1"></a><a class="docs-heading-anchor-permalink" href="#Server-Design" title="Permalink"></a></h2><h3 id="Containerization"><a class="docs-heading-anchor" href="#Containerization">Containerization</a><a id="Containerization-1"></a><a class="docs-heading-anchor-permalink" href="#Containerization" title="Permalink"></a></h3><p>Each notebook application is bundled and served as via container technology (<a href="https://docs.docker.com/">docker</a> or <a href="https://podman.io/">podman</a>). Containerization is necessary to (1) bundle dependencies, (2) provide a preloaded environment for the <a href="https://github.com/fonsp/Pluto.jl">Pluto</a> notebooks, and (3) to provide fully functional and isolated compute environments to a large number of students. Each instance of the notebooks here is served via a container image.   </p><h3 id="Existing-Hub-Servers"><a class="docs-heading-anchor" href="#Existing-Hub-Servers">Existing Hub Servers</a><a id="Existing-Hub-Servers-1"></a><a class="docs-heading-anchor-permalink" href="#Existing-Hub-Servers" title="Permalink"></a></h3><p>Technology to serve containers with notebooks exist, e.g <a href="https://jupyter.org/hub">JupyterHub</a> or <a href="https://binderhub.readthedocs.io/en/latest/">BinderHub</a>. These are typically deployed via cloud services and are suitable to serve a contained computing environment to either a classroom or the general public. The general focus is to integrate programming in the classroom or openly communicate software to the science community. </p><p>The notebook framework here differs. It is mostly to serve interactive web applications. The focus is less on the code itself, but on leveraging high-level languages such as <a href="https://julialang.org/">Julia</a> or <a href="https://www.python.org/">Python</a> to create interactive content. For example, the notebook can be used as a web-front end to animate the output of computational models that run on the backend. Often these models are written in compiled languages with multiple dependencies. Serving such content to students (and the public) via web interfaces can be challenging. Local installs of the entire software can become complex due to platform dependence and dependency management. Containers are a convenient way to bundle and serve such web apps. It is possible to serve these containers through either JuyterHub or BinderHub. However, in practice there are several drawbacks.</p><h3 id="Need-For-Different-Approaches"><a class="docs-heading-anchor" href="#Need-For-Different-Approaches">Need For Different Approaches</a><a id="Need-For-Different-Approaches-1"></a><a class="docs-heading-anchor-permalink" href="#Need-For-Different-Approaches" title="Permalink"></a></h3><p>JupyterHub and BinderHub are designed to run on <a href="https://kubernetes.io/">Kubernetes</a> clusters in the cloud (e.g. <a href="https://z2jh.jupyter.org/en/stable/">zero-to-jupyterhub for Kuberenetes</a>). On premise installation is possible but not recommended.JupyterHub and Kubernetes clusters provide advanced resource management. Yet rapid scaling of the infrastructure at the beginning of a lecture is still slow, as new nodes will have to be provisioned and container image need to be pulled from a repository. The base-cost of the minimum number of manager and worker nodes is expensive. Hosting multiple different container images might require complex hub management. Startup times using this infrastructure can be several minutes before the application is ready. This includes bottlenecks of provisioning nodes, authentication on the hub, loading of the notebook, and execution of the notebook. The latter is exacerbated when using Julia as the notebook language, which has additional compile lag. Overall this is a drain on classroom resources and annoying for users that are used to much faster load times.   </p><p>The desired behavior is to provide the user a URL which opens the app. The app should be immediately ready for use. Since the apps are intended to be stateless (i.e. the user gets a fresh instance each time they open a link), authentication barriers are not needed.</p><h3 id="This-Server"><a class="docs-heading-anchor" href="#This-Server">This Server</a><a id="This-Server-1"></a><a class="docs-heading-anchor-permalink" href="#This-Server" title="Permalink"></a></h3><p>This server attempts to provide a solution to the above problem. Containers are served via Docker swarm. Leveraging Pluto notebooks allows the notebook to be executed when the container is created. A set number of containers are pre-provisioned so that they are ready for immediate consumption. The user is served a link that opens the executed notebook. Each user obtains a unique link that is secured by a secret token, which prevents the accidental or intentional hijacking of a resource by a different user. Once open, the application is ready for immediate use. A monitoring script detects opened container instances and destroys them after a given timeout. A new container is created for the next user.</p><p>In addition to the advantages to the user, this infrastructure is in many ways less complex than the JuyterHub framework. It can readily be deployed on premises using a wide range of hardware, and is scalable to large deployments. A regular workstation with 24 cores/64 GB of memory would be sufficient to serve 30+ students. The swarm can either be local or using cloud servers. Hosting multiple different applications residing in different containers with different architecture is possible. The <a href="https://github.com/CIF-Cold-Stage/swarmServerInfrastructure">code</a> running the web server can be adapted to individual use cases. </p><h3 id="Acknowledgments"><a class="docs-heading-anchor" href="#Acknowledgments">Acknowledgments</a><a id="Acknowledgments-1"></a><a class="docs-heading-anchor-permalink" href="#Acknowledgments" title="Permalink"></a></h3><p><strong>Development of the server software was supported by NSF grant AGS 2112978.</strong></p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../tutorial/">« Data Inversion Tutorial</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.5.0 on <span class="colophon-date" title="Saturday 3 August 2024 20:42">Saturday 3 August 2024</span>. Using Julia version 1.10.4.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
